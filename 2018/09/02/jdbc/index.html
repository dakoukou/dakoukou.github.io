<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="个人博客"><title>MVC架构下进行数据库操作（增删改查） | 做工的人</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">MVC架构下进行数据库操作（增删改查）</h1><a id="logo" href="/.">做工的人</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">MVC架构下进行数据库操作（增删改查）</h1><div class="post-meta">Sep 2, 2018<span> | </span><span class="category"><a href="/categories/java/">java</a></span></div><a class="disqus-comment-count" href="/2018/09/02/jdbc/#vcomment"><span class="valine-comment-count" data-xid="/2018/09/02/jdbc/"></span><span> 条评论</span></a><div class="post-content"><h3 id="JavaWeb数据库操作"><a href="#JavaWeb数据库操作" class="headerlink" title="JavaWeb数据库操作"></a>JavaWeb数据库操作</h3><h5 id="利用servlet简单得对数据库进行增删改查操作，在这里我用的是MySql数据库"><a href="#利用servlet简单得对数据库进行增删改查操作，在这里我用的是MySql数据库" class="headerlink" title="利用servlet简单得对数据库进行增删改查操作，在这里我用的是MySql数据库"></a>利用servlet简单得对数据库进行增删改查操作，在这里我用的是MySql数据库</h5><h4 id="操作步骤：-lt-–-more-–"><a href="#操作步骤：-lt-–-more-–" class="headerlink" title="操作步骤：&lt;!– more –*"></a>操作步骤：&lt;!– more –*</h4><h4 id="1-工程项目如下"><a href="#1-工程项目如下" class="headerlink" title="1.工程项目如下"></a>1.工程项目如下</h4><ul>
<li><img src="/2018/09/02/jdbc/1.png" alt=""></li>
</ul>
<h4 id="添加以下jar包"><a href="#添加以下jar包" class="headerlink" title="添加以下jar包"></a>添加以下jar包</h4><p>*mysql-connector-java-5.1.27-bin</p>
<h4 id="2-创建util包"><a href="#2-创建util包" class="headerlink" title="2.创建util包"></a>2.创建util包</h4><p>  (1)进行数据库的连接操作</p>
<p>   这里我在<strong>util</strong>包下创建了<strong>DBTools</strong>类和<strong>UpdateSqlTools</strong>类 </p>
<ul>
<li><p>DBTools: </p>
</li>
<li><p>连接查询工具类</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBTools</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 创建连接地址</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String url = <span class="string">"jdbc:mysql://localhost:3306/你的数据库名称?useUnicode=true&amp;characterEncoding=utf8"</span>;</span><br><span class="line">	<span class="comment">// 创建用户名</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String name = <span class="string">"你的数据库名字"</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String pwd = <span class="string">"你的数据库密码"</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 驱动包</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String dpg = <span class="string">"com.mysql.jdbc.Driver"</span>;</span><br><span class="line">	<span class="comment">// 创建连接</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Connection conn = <span class="keyword">null</span>;</span><br><span class="line">	<span class="comment">// 创建就绪状态</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> PreparedStatement psmt = <span class="keyword">null</span>;</span><br><span class="line">	<span class="comment">// 创建结果集</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> ResultSet set = <span class="keyword">null</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String Error = <span class="string">"空返回值异常"</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 连接数据库</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Class.forName(dpg);</span><br><span class="line">			conn = (Connection) DriverManager.getConnection(url, name, pwd);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">			System.out.println(<span class="string">"驱动包有问题"</span>);</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">			System.out.println(<span class="string">"密码错误/数据库没创建"</span>);</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 通用的查询操作</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getExcuteResult</span><span class="params">(String sql, Object... pram)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 创建连接</span></span><br><span class="line">		getConnection();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			psmt = (PreparedStatement) conn.prepareStatement(sql);</span><br><span class="line">			<span class="keyword">if</span> (pram != <span class="keyword">null</span>) &#123;</span><br><span class="line">				<span class="comment">// for(Object obj:param)</span></span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pram.length; i++) &#123;</span><br><span class="line">					<span class="comment">// pstm.setObject(这是第几个问号, “参数内容”);</span></span><br><span class="line">					psmt.setObject(i + <span class="number">1</span>, pram[i]);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				System.out.println(<span class="string">"没SQL语句"</span>);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// .execute(); 用来判断是否是查询操作,无论是否查询操作，都将执行</span></span><br><span class="line">			<span class="keyword">boolean</span> b = psmt.execute();</span><br><span class="line">			System.out.println(b);</span><br><span class="line">			<span class="keyword">if</span> (b) &#123;</span><br><span class="line">				<span class="comment">//获取到get</span></span><br><span class="line">				set = psmt.getResultSet();</span><br><span class="line">				<span class="keyword">return</span> set;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				System.out.println(<span class="string">"不是查询操作，执行更新操作"</span>);</span><br><span class="line">				<span class="comment">// 用来执行更新操作，返回值int</span></span><br><span class="line">				<span class="comment">// 获取执行更新操作的数量</span></span><br><span class="line">				<span class="keyword">int</span> num = psmt.getUpdateCount();</span><br><span class="line">				<span class="keyword">return</span> num;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">			System.out.println(<span class="string">"sql有错，请检查sql语句"</span>);</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> Error;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 关闭数据图连接，状态，结果集</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">closeAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (conn != <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">				conn.close();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (psmt != <span class="keyword">null</span>) &#123;</span><br><span class="line">				psmt.close();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (set != <span class="keyword">null</span>) &#123;</span><br><span class="line">				set.close();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>UpdateSqlTools</p>
<ul>
<li>更新操作工具类<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UpdateSqlTools</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">operation</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">boolean</span> b = <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">if</span>(num&gt;<span class="number">0</span>) &#123;</span><br><span class="line">			b=<span class="keyword">true</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			b=<span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> b;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="3-创建你的POJO包"><a href="#3-创建你的POJO包" class="headerlink" title="3.创建你的POJO包"></a>3.创建你的POJO包</h4><p>  根据你自己创建的数据库进行创建，我建了个User表 和Admin表 ，在网页中输入管理员的账户密码来修改用户的信息 </p>
<ul>
<li>user表</li>
</ul>
<p><img src="/2018/09/02/jdbc/2.png" alt=""></p>
<ul>
<li>admin表</li>
</ul>
<p><img src="/2018/09/02/jdbc/6.png" alt=""></p>
<p>所以你的实体类根据你的表建立：</p>
<ul>
<li>User类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Long userid;</span><br><span class="line">	<span class="keyword">private</span> String username;</span><br><span class="line">	<span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Long <span class="title">getUserid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> userid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserid</span><span class="params">(Long userid)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.userid = userid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> username;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.username = username;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> password;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.password = password;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Admin类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Admin</span>  </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> adminid;</span><br><span class="line">	<span class="keyword">private</span> String adminname;</span><br><span class="line">	<span class="keyword">private</span> String adminpassword;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Admin</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getAdminid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> adminid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAdminid</span><span class="params">(<span class="keyword">long</span> adminid)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.adminid = adminid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getAdminname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> adminname;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAdminname</span><span class="params">(String adminname)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.adminname = adminname;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getAdminpassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> adminpassword;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAdminpassword</span><span class="params">(String adminpassword)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.adminpassword = adminpassword;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-创建你的dao包"><a href="#4-创建你的dao包" class="headerlink" title="4.创建你的dao包"></a>4.创建你的dao包</h4><p> 现在要实现对数据库的增删改查</p>
<p> （1）我们可以先创建个<strong>IBaseDao接口类</strong>它是我们这个项目<strong>通用</strong>的数据库访问层接口的父类 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IBaseDao</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;T&gt; <span class="title">query</span><span class="params">(Object... param)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 带sql的操作</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> Sql</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;T&gt; <span class="title">query</span><span class="params">(String Sql,Object ...param)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(T t)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 修改</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">update</span><span class="params">(T t)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 删除</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(Object... param)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> (2)  创建读取用户数据库的<strong>IUserDao接口类</strong>让他继承父类<strong>IBaseDao</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> <span class="keyword">extends</span> <span class="title">IBaseDao</span>&lt;<span class="title">User</span>&gt;  </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p> (3)  接口类有了，现在创建用户接口的实现类</p>
<ul>
<li>IUserDaoImpl类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IUserDaoImpl</span> <span class="keyword">extends</span> <span class="title">UpdateSqlTools</span> <span class="keyword">implements</span> <span class="title">IBaseDao</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//查询</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">query</span><span class="params">(Object... param)</span> </span>&#123;</span><br><span class="line">		String sql = <span class="string">"select * from user order by userid desc"</span>;</span><br><span class="line">		ResultSet set = (ResultSet) DBTools.getExcuteResult(sql, param);</span><br><span class="line">		List&lt;User&gt; list = <span class="keyword">new</span> ArrayList&lt;User&gt;();</span><br><span class="line">		User user = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">while</span>(set.next()) &#123;</span><br><span class="line">				user = <span class="keyword">new</span> User();</span><br><span class="line">				user.setUsername(set.getString(<span class="string">"username"</span>));</span><br><span class="line">				user.setPassword(set.getString(<span class="string">"password"</span>));</span><br><span class="line">				user.setUserid(set.getLong(<span class="string">"userid"</span>));</span><br><span class="line">				list.add(user);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">			System.out.println(<span class="string">"无数据"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> list;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">	<span class="comment">//带SQL语句的查询</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">query</span><span class="params">(String sql,Object... param)</span> </span>&#123;</span><br><span class="line">		ResultSet set = (ResultSet) DBTools.getExcuteResult(sql, param);</span><br><span class="line">		List&lt;User&gt; list = <span class="keyword">new</span> ArrayList&lt;User&gt;();</span><br><span class="line">		User user = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">while</span>(set.next()) &#123;</span><br><span class="line">				user = <span class="keyword">new</span> User();</span><br><span class="line">				user.setUsername(set.getString(<span class="string">"username"</span>));</span><br><span class="line">				user.setPassword(set.getString(<span class="string">"password"</span>));</span><br><span class="line">				user.setUserid(set.getLong(<span class="string">"userid"</span>));</span><br><span class="line">				list.add(user);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">			System.out.println(<span class="string">"无数据"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> list;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">   <span class="comment">//添加</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		String sql = <span class="string">"insert into user(username,password)"</span></span><br><span class="line">				+ <span class="string">"values(?,?)"</span>;</span><br><span class="line">		Object[] param = &#123;user.getUsername(),user.getPassword()&#125;;</span><br><span class="line">		<span class="keyword">int</span> num = (<span class="keyword">int</span>) DBTools.getExcuteResult(sql, param);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.operation(num);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">   <span class="comment">// 修改</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">update</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">		String sql = <span class="string">"update user set username=?,password=? where userid=?"</span>;</span><br><span class="line">		Object[] param = &#123;user.getUsername(),user.getPassword(),user.getUserid()&#125;;</span><br><span class="line">		<span class="keyword">int</span> num = (<span class="keyword">int</span>) DBTools.getExcuteResult(sql, param);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.operation(num);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(Object... param)</span> </span>&#123;</span><br><span class="line">		String sql = <span class="string">"delete from user where userid =?"</span>;</span><br><span class="line">		<span class="keyword">int</span> num = (<span class="keyword">int</span>) DBTools.getExcuteResult(sql, param);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.operation(num);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 4)  现在在创建对管理员接口的实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.javaweb.dao.impl;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 管理员数据访问层实现类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.javaweb.dao.IBaseDao;</span><br><span class="line"><span class="keyword">import</span> com.javaweb.pojo.Admin;</span><br><span class="line"><span class="keyword">import</span> com.javaweb.util.DBTools;</span><br><span class="line"><span class="keyword">import</span> com.javaweb.util.UpdateSqlTools;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IAdminDaoImpl</span> <span class="keyword">extends</span> <span class="title">UpdateSqlTools</span> <span class="keyword">implements</span> <span class="title">IBaseDao</span>&lt;<span class="title">Admin</span>&gt;</span>&#123;</span><br><span class="line">      <span class="comment">//因为管理员只需要查询 ，不用更新所以就先实现这一个方法</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Admin&gt; <span class="title">query</span><span class="params">(String sql, Object[] param)</span> </span>&#123;</span><br><span class="line">		ResultSet set = (ResultSet) DBTools.getExcuteResult(sql, param);</span><br><span class="line">		List&lt;Admin&gt; list = <span class="keyword">new</span> ArrayList&lt;Admin&gt;();</span><br><span class="line">		Admin admin = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">while</span>(set.next()) &#123;</span><br><span class="line">				admin = <span class="keyword">new</span> Admin();</span><br><span class="line">				admin.setAdminname(set.getString(<span class="string">"adminname"</span>));</span><br><span class="line">				admin.setAdminpassword(set.getString(<span class="string">"adminpassword"</span>));</span><br><span class="line">				admin.setAdminid(set.getLong(<span class="string">"adminid"</span>));</span><br><span class="line">				list.add(admin);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">			System.out.println(<span class="string">"无数据"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> list;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(Admin t)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">update</span><span class="params">(Admin t)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(Object... param)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Admin&gt; <span class="title">query</span><span class="params">(Object... param)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="5-创建service包"><a href="#5-创建service包" class="headerlink" title="5.创建service包"></a>5.创建service包</h4><p>   在service中写的是业务需求（例如登录、注册、查询更新等）</p>
<p> (1) 和dao包一样，我们先创建一个通用的基本业务逻辑</p>
<ul>
<li>IBaseService 类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IBaseService</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;T&gt; <span class="title">query</span><span class="params">(Object... param)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 带sql的操作</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> Sql</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;T&gt; <span class="title">query</span><span class="params">(String Sql,Object ...param)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 添加</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(T t)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 修改</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">update</span><span class="params">(T t)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 删除</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(Object... param)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(2) 创建管理员service接口类 让他继承基本业务逻辑</p>
<ul>
<li>IAdminService 类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IAdminService</span> <span class="keyword">extends</span> <span class="title">IBaseService</span>&lt;<span class="title">Admin</span>&gt; </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>(3) 有了基本业务逻辑，就需要创建<strong>用户</strong>业务逻辑实现类</p>
<ul>
<li>IUserServiceImpl 类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IUserServiceImpl</span> <span class="keyword">implements</span> <span class="title">IBaseService</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">	<span class="comment">//使用接口实例化实现类</span></span><br><span class="line">	<span class="keyword">private</span> IBaseDao&lt;User&gt; userdao = <span class="keyword">new</span> IUserDaoImpl();</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">query</span><span class="params">(Object... param)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.userdao.query(param);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">query</span><span class="params">(String Sql, Object... param)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.userdao.query(Sql,param);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.userdao.add(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">update</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.userdao.update(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(Object... param)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.userdao.delete(param);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(4) 有了<strong>用户</strong>业务逻辑实现类，继续创建<strong>管理员</strong>的业务逻辑实现类</p>
<ul>
<li>IAdminServiceImpl 类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.javaweb.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.javaweb.dao.IBaseDao;</span><br><span class="line"><span class="keyword">import</span> com.javaweb.dao.impl.IAdminDaoImpl;</span><br><span class="line"><span class="keyword">import</span> com.javaweb.pojo.Admin;</span><br><span class="line"><span class="keyword">import</span> com.javaweb.service.IAdminService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IAdminServiceImpl</span> <span class="keyword">implements</span> <span class="title">IAdminService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> IBaseDao&lt;Admin&gt; admindao = <span class="keyword">new</span> IAdminDaoImpl();</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Admin&gt; <span class="title">query</span><span class="params">(String sql, Object... param)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.admindao.query(sql, param);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Admin&gt; <span class="title">query</span><span class="params">(Object... param)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(Admin t)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">update</span><span class="params">(Admin t)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(Object... param)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="6-创建servlet包"><a href="#6-创建servlet包" class="headerlink" title="6. 创建servlet包"></a>6. 创建servlet包</h4><p>（1）创建loginServlet 类，要特殊用创建servlet方法</p>
<ul>
<li>右键-&gt;新建-&gt;Servlet(没有在Other里找)-&gt;Create Servlet    </li>
</ul>
<p><img src="/2018/09/02/jdbc/3.png" alt=""></p>
<ul>
<li>勾选</li>
</ul>
<p><img src="/2018/09/02/jdbc/4.png" alt=""></p>
<ul>
<li>loginServlet 作用是对从网页上获得的管理员信息进行验证登陆</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/loginServlt"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">loginServlt</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpServlet#HttpServlet()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> Servlet#destroy()</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">    	<span class="keyword">super</span>.init();</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//使用接口实例化实现类</span></span><br><span class="line">		IBaseService&lt;Admin&gt; adminservice = <span class="keyword">new</span> IAdminServiceImpl();</span><br><span class="line">        <span class="comment">//获取login.jsp界面上的管理员用户名和密码</span></span><br><span class="line">		String adminname = request.getParameter(<span class="string">"adminname"</span>);</span><br><span class="line">		String adminpwd = request.getParameter(<span class="string">"adminpassword"</span>);</span><br><span class="line">		System.out.println(adminname);</span><br><span class="line">		System.out.println(adminpwd);</span><br><span class="line">        <span class="comment">//查询语句</span></span><br><span class="line">		String sql = <span class="string">"select * from admin where adminname=? and adminpassword=?"</span>;</span><br><span class="line">		String [] param = &#123;adminname,adminpwd&#125;;</span><br><span class="line">        <span class="comment">//将查询结果放入list</span></span><br><span class="line">		List&lt;Admin&gt; list = adminservice.query(sql, param);</span><br><span class="line">		System.out.println(list.get(<span class="number">0</span>).getAdminname());</span><br><span class="line">		<span class="comment">//session</span></span><br><span class="line">		HttpSession session = request.getSession();</span><br><span class="line">        <span class="comment">//size&gt;0 说明有数据 进行跳转</span></span><br><span class="line">		<span class="keyword">if</span>(list.size()&gt;<span class="number">0</span>) &#123;</span><br><span class="line">			Long adminid = list.get(<span class="number">0</span>).getAdminid();</span><br><span class="line">			session.setAttribute(<span class="string">"login_adminid"</span>, adminid);</span><br><span class="line">			session.setAttribute(<span class="string">"Adminname"</span>, list.get(<span class="number">0</span>).getAdminname());</span><br><span class="line">			<span class="comment">//跳转到读取用户列表的servlet</span></span><br><span class="line">			response.sendRedirect(<span class="string">"UserListServlet"</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			session.setAttribute(<span class="string">"login_adminid"</span>, <span class="number">0</span>);</span><br><span class="line">			response.sendRedirect(<span class="string">"login.jsp"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		doGet(request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>（2）创建UserListServlet类</p>
<ul>
<li>查询用户列表信息</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/UserListServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserListServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">       </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserListServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		doPost(request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//使用接口实例化实现类</span></span><br><span class="line">		IBaseService&lt;User&gt; userservivce = <span class="keyword">new</span> IUserServiceImpl();</span><br><span class="line">        <span class="comment">//这里有隐藏的sql语句 select * from user order by userid desc</span></span><br><span class="line">		String param[] = &#123;&#125;;</span><br><span class="line">        <span class="comment">//查询所有结果放入list</span></span><br><span class="line">		List&lt;User&gt; list = userservivce.query(param);</span><br><span class="line">		<span class="comment">//通过session将list传递给jsp</span></span><br><span class="line">		HttpSession session =  request.getSession();</span><br><span class="line">        <span class="comment">//list 命名为userlist</span></span><br><span class="line">		session.setAttribute(<span class="string">"userlist"</span>, list);</span><br><span class="line">		response.sendRedirect(<span class="string">"index.jsp"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>（3）创建UserAddServlet类</p>
<ul>
<li>添加用户信息</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/UserAddServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserAddServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">UserAddServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		doPost(request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		String username = request.getParameter(<span class="string">"username"</span>);<span class="comment">// 用户名</span></span><br><span class="line">		String password = request.getParameter(<span class="string">"password"</span>);<span class="comment">// 密码</span></span><br><span class="line">		<span class="comment">// 1.实例化service</span></span><br><span class="line">		IBaseService&lt;User&gt; userservice = <span class="keyword">new</span> IUserServiceImpl();</span><br><span class="line">		<span class="comment">// 2.实例化用户</span></span><br><span class="line">		User user = <span class="keyword">new</span> User();</span><br><span class="line">		user.setUsername(username);</span><br><span class="line">		user.setPassword(password);</span><br><span class="line">		<span class="comment">// 调用添加方法</span></span><br><span class="line">		userservice.add(user);</span><br><span class="line">		<span class="comment">// 添加成功后跳转到了查询用户列表页面</span></span><br><span class="line">		response.sendRedirect(<span class="string">"UserListServlet"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>（4）创建UserDeleteServlet类</p>
<ul>
<li>删除用户信息</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/UserDeleteServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDeleteServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserDeleteServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//获取index.jsp页面传递的UserId</span></span><br><span class="line">		<span class="keyword">long</span> userid = Long.parseLong(request.getParameter(<span class="string">"userid"</span>));</span><br><span class="line">		<span class="comment">//调用service</span></span><br><span class="line">		IBaseService&lt;User&gt; userservice = <span class="keyword">new</span> IUserServiceImpl();</span><br><span class="line">		Object param[] = &#123;userid&#125;;</span><br><span class="line">		userservice.delete(param);</span><br><span class="line">        <span class="comment">//数据更新后返回UserlistServlet 在进行处理，把所有的结果传递到index.jsp界面</span></span><br><span class="line">		response.sendRedirect(request.getContextPath()+<span class="string">"/UserListServlet"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		doGet(request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>（5）创建UserToUpdateServlet类</p>
<ul>
<li>跳转到修改用户信息</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"serial"</span>)</span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/UserToUpdateServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserToUpdateServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">UserToUpdateServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.init(config);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.destroy();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		doPost(req, resp);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		<span class="comment">//跳转到修改页面时，需要首先获取到要修改的数据</span></span><br><span class="line">		<span class="comment">//即：通过主键查询出来该条数据的内容</span></span><br><span class="line">		<span class="keyword">long</span> userid = Long.parseLong(req.getParameter(<span class="string">"userid"</span>));</span><br><span class="line">		System.out.println(userid);</span><br><span class="line">		Object param[] = &#123;userid&#125;;</span><br><span class="line">		String sql = <span class="string">"select * from user where userid = ?"</span>;</span><br><span class="line">		<span class="comment">//实例化service</span></span><br><span class="line">		IBaseService&lt;User&gt; userservice = <span class="keyword">new</span> IUserServiceImpl();</span><br><span class="line">		User user = userservice.query(sql, param).get(<span class="number">0</span>);</span><br><span class="line">		<span class="comment">//通过session把数据共享到下一页面</span></span><br><span class="line">		HttpSession session = req.getSession();</span><br><span class="line">		session.setAttribute(<span class="string">"user"</span>, user);</span><br><span class="line">		<span class="comment">//req.getContextPath()获取到项目目录-&gt;EL:pageContext.request.contextPath</span></span><br><span class="line">		resp.sendRedirect(req.getContextPath()+<span class="string">"/admin/user/user_update.jsp"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>（6）创建UserUpdateServlet类</p>
<ul>
<li>用户数据修改</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/UserUpdateServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserUpdateServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserUpdateServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		String username = request.getParameter(<span class="string">"username"</span>);<span class="comment">// 用户名</span></span><br><span class="line">		String password = request.getParameter(<span class="string">"password"</span>);<span class="comment">// 密码</span></span><br><span class="line">		<span class="keyword">long</span> userid = Long.parseLong(request.getParameter(<span class="string">"userid"</span>));</span><br><span class="line">		<span class="comment">//1.实例化service</span></span><br><span class="line">		IBaseService&lt;User&gt; userservice = <span class="keyword">new</span> IUserServiceImpl();</span><br><span class="line">		<span class="comment">//2.实例化用户</span></span><br><span class="line">		User user = <span class="keyword">new</span> User();</span><br><span class="line">		user.setUsername(username);</span><br><span class="line">		user.setPassword(password);</span><br><span class="line">		user.setUserid(userid);</span><br><span class="line">		<span class="comment">//调用service的修改方法进行修改</span></span><br><span class="line">		userservice.update(user);</span><br><span class="line">		<span class="comment">//跳转到列表查询的servlet可以查看到更新过的数据</span></span><br><span class="line">		response.sendRedirect(request.getContextPath()+<span class="string">"/UserListServlet"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		doGet(request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="7-创建JSP页面"><a href="#7-创建JSP页面" class="headerlink" title="7.创建JSP页面"></a>7.创建JSP页面</h4><ul>
<li><p>结构如下：</p>
</li>
<li><p><img src="/2018/09/02/jdbc/5.png" alt=""></p>
</li>
</ul>
<p>(1) 创建登陆页面 </p>
<p>   在创建之前 我们需要修改web.xml成下面这个样子，让这个页面可以随意登陆，其他页面必须有权限才能登陆</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>login.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>login.jsp 简单的创建了一个登陆界面</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;内容管理系统&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!--读取的数据传递到UserServlet 在那里在进行后续操作--&gt;</span><br><span class="line">&lt;form action=<span class="string">"LoginServlt"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">   用户名:&lt;input type=<span class="string">"text"</span>  placeholder=<span class="string">"输入账号"</span> name=<span class="string">"username"</span>&gt;&lt;br/&gt;</span><br><span class="line">   密码：&lt;input type=<span class="string">"password"</span>  placeholder=<span class="string">"输入密码"</span> name=<span class="string">"password"</span>&gt;&lt;br/&gt;</span><br><span class="line">   &lt;button type="submit"&gt;登陆&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>（2） 登陆的信息到UserServlet经过验证通过UserListServlet把所有数据传递到index.jsp页面 </p>
<p>​     我们创建一个index.jsp页面用来进行接收数据库数据</p>
<ul>
<li>index.jsp</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">	pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%<span class="meta">@page</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</span><br><span class="line">&lt;%<span class="meta">@page</span> <span class="keyword">import</span>=<span class="string">"com.javaweb.pojo.User"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;登陆验证&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div&gt;用户列表&lt;/div&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		&lt;button type="button" id="add"&gt;添加用户&lt;/button&gt;</span><br><span class="line">		&lt;button type="button" id="update"&gt;修改&lt;/button&gt;</span><br><span class="line">		&lt;button type="button" id="delete"&gt;删除&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		&lt;div&gt;</span><br><span class="line">			&lt;table&gt;</span><br><span class="line">				&lt;thead&gt;</span><br><span class="line">					&lt;tr&gt;</span><br><span class="line">						&lt;th&gt;&lt;input type="checkbox"&gt;&lt;/th&gt;</span><br><span class="line">						&lt;th&gt;用户id&lt;/th&gt;</span><br><span class="line">						&lt;th&gt;用户名&lt;/th&gt;</span><br><span class="line">						&lt;th&gt;密码&lt;/th&gt;</span><br><span class="line">					&lt;/tr&gt;</span><br><span class="line">				&lt;/thead&gt;</span><br><span class="line">				&lt;tbody&gt;</span><br><span class="line">                    &lt;!--传递数据 userlist就是UserListServlet处理的数据--&gt;</span><br><span class="line">					&lt;%</span><br><span class="line">						List&lt;User&gt; list = (ArrayList&lt;User&gt;) session.getAttribute(<span class="string">"userlist"</span>);</span><br><span class="line">					%&gt;</span><br><span class="line">                    &lt;!--<span class="keyword">for</span>循环 把数据遍历出来--&gt;</span><br><span class="line">					&lt;%</span><br><span class="line">						<span class="keyword">for</span> (User user : list) &#123;</span><br><span class="line">					%&gt;</span><br><span class="line">					&lt;tr&gt;</span><br><span class="line">						&lt;td&gt;&lt;input type="checkbox" value="&lt;%=user.getUserid()%&gt;" class="cbx"&gt;&lt;/td&gt;</span><br><span class="line">						&lt;td&gt;&lt;%=user.getUserid()%&gt;&lt;/td&gt;</span><br><span class="line">						&lt;td&gt;&lt;%=user.getUsername()%&gt;&lt;/td&gt;</span><br><span class="line">						&lt;td&gt;&lt;%=user.getPassword()%&gt;&lt;/td&gt;</span><br><span class="line"></span><br><span class="line">					&lt;/tr&gt;</span><br><span class="line">					&lt;%</span><br><span class="line">						&#125;</span><br><span class="line">					%&gt;</span><br><span class="line">				&lt;/tbody&gt;</span><br><span class="line">			&lt;/table&gt;</span><br><span class="line">			&lt;hr&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">		<span class="comment">//创建添加链接，进入添加界面</span></span><br><span class="line">		document.getElementById(<span class="string">"add"</span>).onclick = <span class="function">function <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">//添加界面的路径</span></span><br><span class="line">			window.location.href = <span class="string">"$&#123;pageContext.request.contextPath&#125;/admin/user/user_add.jsp"</span>;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="comment">//创建修改连接</span></span><br><span class="line">		docum</span><br><span class="line">		ent.getElementById(<span class="string">"update"</span>).onclick = <span class="function">function <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			var cbx = document.getElementsByClassName(<span class="string">"cbx"</span>);</span><br><span class="line">			var userid = <span class="number">0</span>;</span><br><span class="line">			var num = <span class="number">0</span>;</span><br><span class="line">			<span class="comment">//用来统计选中了几个</span></span><br><span class="line">			<span class="keyword">for</span> (var i = <span class="number">0</span>; i &lt; cbx.length; i++) &#123;</span><br><span class="line">				<span class="keyword">if</span> (cbx[i].checked) &#123;</span><br><span class="line">					num++;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (num &gt; <span class="number">1</span>) &#123;</span><br><span class="line">				alert(<span class="string">"只能选择一条数据！"</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (num == <span class="number">1</span>) &#123;</span><br><span class="line">				<span class="comment">//选中的值</span></span><br><span class="line">				<span class="keyword">for</span> (var i = <span class="number">0</span>; i &lt; cbx.length; i++) &#123;</span><br><span class="line">					<span class="keyword">if</span> (cbx[i].checked) &#123;</span><br><span class="line">						userid = cbx[i].value;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">                <span class="comment">//利用userid进行修改操作</span></span><br><span class="line">				window.location.href = <span class="string">"$&#123;pageContext.request.contextPath&#125;/UserToUpdateServlet?userid="</span></span><br><span class="line">						+ userid;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				alert(<span class="string">"必须选择一条数据！"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="comment">//执行删除操作</span></span><br><span class="line">		document.getElementById(<span class="string">"delete"</span>).onclick = <span class="function">function <span class="title">deletes</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			var cbx = document.getElementsByClassName(<span class="string">"cbx"</span>);</span><br><span class="line">			var userid = <span class="number">0</span>;</span><br><span class="line">			var num = <span class="number">0</span>;</span><br><span class="line">			<span class="comment">//用来统计选中了几个</span></span><br><span class="line">			<span class="keyword">for</span> (var i = <span class="number">0</span>; i &lt; cbx.length; i++) &#123;</span><br><span class="line">				<span class="keyword">if</span> (cbx[i].checked) &#123;</span><br><span class="line">					num++;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (num &gt; <span class="number">1</span>) &#123;</span><br><span class="line">				alert(<span class="string">"只能选择一条数据！"</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (num == <span class="number">1</span>) &#123;</span><br><span class="line">				<span class="comment">//选中的值</span></span><br><span class="line">				<span class="keyword">for</span> (var i = <span class="number">0</span>; i &lt; cbx.length; i++) &#123;</span><br><span class="line">					<span class="keyword">if</span> (cbx[i].checked) &#123;</span><br><span class="line">						userid = cbx[i].value;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">                <span class="comment">//利用userid进行删除操作 利用UserDeleteServlet</span></span><br><span class="line">				window.location.href = <span class="string">"$&#123;pageContext.request.contextPath&#125;/UserDeleteServlet?userid="</span></span><br><span class="line">						+ userid;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				alert(<span class="string">"必须选择一条数据！"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>（3） 创建添加用户信息的界面</p>
<ul>
<li>user_add.jsp 路径很重要 要记住</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">	pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=edge"</span>&gt;</span><br><span class="line">&lt;title&gt;添加用户&lt;/title&gt;</span><br><span class="line">&lt;meta name=<span class="string">"description"</span> content=<span class="string">"这是一个 index 页面"</span>&gt;</span><br><span class="line">&lt;meta name=<span class="string">"keywords"</span> content=<span class="string">"index"</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;div class="tpl-content-page-title"&gt;添加用户&lt;/div&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">        &lt;!--修改后的数据通过UserAddServlet 到 UserListServlet 最后传递到 index.jsp --&gt;</span><br><span class="line">		&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath &#125;/UserAddServlet"</span></span><br><span class="line">			method=<span class="string">"post"</span>&gt;</span><br><span class="line">			&lt;div&gt;</span><br><span class="line">				&lt;label&gt;用户名 / UserName&lt;/label&gt;</span><br><span class="line">				&lt;div&gt;</span><br><span class="line">					&lt;input type=<span class="string">"text"</span> id=<span class="string">"usern-name"</span> placeholder=<span class="string">"用户名 / UserName"</span></span><br><span class="line">						name="username"&gt; &lt;small&gt;输入你的账号，让我们记住你。&lt;/small&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">			&lt;div&gt;</span><br><span class="line">				&lt;label&gt;密码 / Password&lt;/label&gt;</span><br><span class="line">				&lt;div&gt;</span><br><span class="line">					&lt;input type=<span class="string">"password"</span> id=<span class="string">"pwd"</span> placeholder=<span class="string">"密码 / Password"</span></span><br><span class="line">						name="password"&gt; &lt;small&gt;输入你的密码，方便登录。&lt;/small&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">			&lt;div&gt;</span><br><span class="line">				&lt;div&gt;</span><br><span class="line">					&lt;button type="submit" class="am-btn am-btn-primary"&gt;保存修改&lt;/button&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>（4） 创建修改用户信息的界面</p>
<ul>
<li>user_update.jsp </li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="meta">@page</span> <span class="keyword">import</span>=<span class="string">"com.javaweb.pojo.User"</span>%&gt;</span><br><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">	pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=edge"</span>&gt;</span><br><span class="line">&lt;title&gt;修改用户&lt;/title&gt;</span><br><span class="line">&lt;meta name=<span class="string">"description"</span> content=<span class="string">"这是一个 index 页面"</span>&gt;</span><br><span class="line">&lt;meta name=<span class="string">"keywords"</span> content=<span class="string">"index"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div&gt;修改用户&lt;/div&gt;</span><br><span class="line">	&lt;%</span><br><span class="line">		User user = (User) session.getAttribute(<span class="string">"user"</span>);</span><br><span class="line">	%&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">         &lt;!--修改后的数据通过UserUpdateServlet 到 UserListServlet 最后传递到 index.jsp --&gt;</span><br><span class="line">		&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath &#125;/UserUpdateServlet"</span></span><br><span class="line">			method=<span class="string">"post"</span>&gt;</span><br><span class="line">			&lt;div&gt;</span><br><span class="line">				&lt;label&gt;用户名/ UserName&lt;/label&gt;</span><br><span class="line">				&lt;div&gt;</span><br><span class="line">					&lt;input type=<span class="string">"text"</span> id=<span class="string">"usern-name"</span> placeholder=<span class="string">"用户名 / UserName"</span></span><br><span class="line">						name="username" value="&lt;%=user.getUsername()%&gt;"&gt; &lt;small&gt;输入你的账号，让我们记住你。&lt;/small&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">			&lt;div&gt;</span><br><span class="line">				&lt;label&gt;密码 /Password&lt;/label&gt;</span><br><span class="line">				&lt;div&gt;</span><br><span class="line">					&lt;input type=<span class="string">"password"</span> id=<span class="string">"pwd"</span> placeholder=<span class="string">"密码 / Password"</span></span><br><span class="line">						name="password" value="&lt;%=user.getPassword()%&gt;"&gt; &lt;small&gt;输入你的密码，方便登录。&lt;/small&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">			&lt;input type=<span class="string">"hidden"</span> value=<span class="string">"&lt;%=user.getUserid()%&gt;"</span> name=<span class="string">"userid"</span>&gt;</span><br><span class="line">			&lt;div&gt;</span><br><span class="line">				&lt;div&gt;</span><br><span class="line">					&lt;button type="submit" class="am-btn am-btn-primary"&gt;保存修改&lt;/button&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>####8.最后在你的TomCat上运行 </p>
<ul>
<li><p>URL映射地址</p>
</li>
<li><p><a href="http://localhost:8080/项目名称" target="_blank" rel="noopener">http://localhost:8080/项目名称</a> </p>
</li>
<li><p>在你的浏览器上输入，就可以看到下面界面</p>
</li>
<li><p>登陆界面  输入你的管理员账号</p>
</li>
</ul>
<p><img src="/2018/09/02/jdbc/7.png" alt=""></p>
<ul>
<li>获取用户信息界面</li>
</ul>
<p><img src="/2018/09/02/jdbc/8.png" alt=""></p>
<ul>
<li>添加用户信息界面 （添加一个123 123）</li>
</ul>
<p><img src="/2018/09/02/jdbc/9.png" alt=""></p>
<p><img src="/2018/09/02/jdbc/10.png" alt=""></p>
<ul>
<li>删除操作 删除了2号</li>
</ul>
<p><img src="/2018/09/02/jdbc/11.png" alt=""></p>
<h4 id="9-结束"><a href="#9-结束" class="headerlink" title="9.结束"></a>9.结束</h4></div><iframe src="/donate/?AliPayQR=/img/AliPayQR.png## Path of Alipay QRcode image, e.g. /img/AliPayQR.png&amp;WeChatQR=null&amp;GitHub=null&amp;BTCQR=null&amp;BTCKEY=null&amp;PayPal=null" style="overflow-x:hidden; overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;" frameborder="0" scrolling="no"></iframe><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="http://yoursite.com/2018/09/02/jdbc/" data-id="cjltmn749000b3guo1yrbhoze" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACuCAAAAACKZ2kyAAABu0lEQVR42u3aS27DMAwFQN//0skBkriPlEUbxXhVxG006oLg7zji53X6fP7mr7/6/PzY8eDi4i5zE0pO/PX9+QXOz8LFxZ3kJsckb3uUxICLi/tkbpKy5AkQLi7u/+Am4ek8VN0Wd3FxcYvc6mEJ4uZaDRcXd4Gbdyn3/bylv4uLi9vivopP9Urnoa18Oi4u7gg3Dyi9VkjeFsnPxcXFneT2liTWx65JJhO9xsXF3catFj+9pGdp/QsXF3eEu9LUqBY2vQCKi4s7z82bIPmIJRmd5sUSLi7uXdwefSUw9dY+cHFxd3OTNYj8GtVkJV/7+DL5wcXF3cbtpSlRIhLH0Wbxg4uLO86tjkYK3Zf1ZAgXF/cmbm99qhr+qsMYXFzceW6vvFkJbc31Dlxc3EFuEsiqaUrv8s1aDRcXdwM3CSjXrmE1z8LFxd3M7ZU3vUFLNVDi4uLexa0Gl6ug0VbISkDExcVd5ubBq9ryyIucwmVwcXEHudW1iTxJWhmo/NEwxcXFfQy3F6Sq5VC5a4KLi/swbnXI2mu/4uLiznPzJmm+hpUXSIV/Ci4u7gi3Ovi8dhx7VeDDxcW9iPsGshNxsNZ2j/wAAAAASUVORK5CYII=">分享</a><div class="tags"><a href="/tags/javaweb/">javaweb</a><a href="/tags/mySql/">mySql</a><a href="/tags/TomCat/">TomCat</a></div><div class="post-nav"><a class="next" href="/2018/08/17/git-JavaEE/">Java EE中利用git上传本地项目到GitHub</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'true' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'j51adWTpOQvlTs5tUv0qQfh5-gzGzoHsz',
  appKey:'FJgF7bFfakm5ctY3PU315YFI',
  placeholder:'Just so so',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://yoursite.com"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/map/" style="font-size: 15px;">map</a> <a href="/tags/javaweb/" style="font-size: 15px;">javaweb</a> <a href="/tags/mySql/" style="font-size: 15px;">mySql</a> <a href="/tags/TomCat/" style="font-size: 15px;">TomCat</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/09/02/jdbc/">MVC架构下进行数据库操作（增删改查）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/17/git-JavaEE/">Java EE中利用git上传本地项目到GitHub</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/04/String类(字符串)/">总结String类(字符串)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/05/java_fanxing/">泛型</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/02/Map-(java)/">Map (java)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/22/maxmin/">求最大最小值（输入数组语句+调用maxmin函数）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/08/Java对象及方法/">Java对象及方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/07/Java1/">类，面向对象的三大属性</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/27/BufferedIOputStream/">同一個电脑的简单的传递数据</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/27/java3/">逐行读取数据的code</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="liuzphi@163.com" title="个人邮箱" target="_blank">个人邮箱</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">做工的人.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>